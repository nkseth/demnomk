{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\"; // import \"./OrderPlaced.scss\";\n\nimport { BoxStyle2, SelectBox2, Alert, GoodSituation, DeliveryProgress, Loading } from \"../../../../../common\";\nimport { Translate } from \"react-localize-redux\";\nimport ItemsBox from \"../ItemsBox\";\nimport ShipTo from \"../ShipTo\";\nimport cashIcon from \"./../../../../../../assets/icons/cash.png\";\nimport creditIcon from \"./../../../../../../assets/icons/img-credit-card.svg\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { client_getPaymentResult } from \"../../../../../../lib/api/client/clientOrder\";\nimport { useRouter } from \"next/router\";\nimport { selectCurr, selectLang } from \"../../../../../../appConfigSlice\";\nimport { formatMoney, removeCouponCookie } from \"../../../../../../lib/helpers\";\nimport { useSelector } from \"react-redux\";\n\nconst OrderPlaced = ({\n  content2\n}) => {\n  const router = useRouter();\n  const curr = useSelector(selectCurr);\n  const lang = useSelector(selectLang);\n  const {\n    token,\n    paymentId,\n    PayerID\n  } = router.query;\n  const {\n    0: paymentLoading,\n    1: setPaymentLoading\n  } = useState(true);\n  const {\n    0: paymentResult,\n    1: setPaymentResult\n  } = useState({\n    error: null,\n    res: {}\n  });\n  useEffect(() => {\n    setPaymentLoading(true);\n    removeCouponCookie();\n    client_getPaymentResult({\n      token,\n      paymentId,\n      PayerID\n    }).then(res => {\n      setPaymentResult({\n        error: false,\n        res: res.result\n      });\n      setPaymentLoading(false);\n    }).catch(err => {\n      if (!err.response.data.result || err.response.data.status != \"400\") {\n        router.push(`/${curr}-${lang}`);\n        return;\n      }\n\n      if (err.response.data.status == \"400\") {\n        setPaymentResult({\n          error: true,\n          res: err.response.data.result\n        });\n        setPaymentLoading(false);\n      }\n    });\n    return () => {};\n  }, []);\n\n  if (paymentLoading) {\n    return __jsx(Loading, {\n      type: \"gray\",\n      styleSheet: {\n        margin: \"80px auto\"\n      },\n      width: \"60px\",\n      height: \"60px\"\n    });\n  }\n\n  return __jsx(React.Fragment, null, paymentResult.error ? __jsx(Alert, {\n    faild: true,\n    btmText: \"Purchase Failed\",\n    btnText: __jsx(Translate, {\n      id: \"common.continue-shopping\"\n    }),\n    topText: \"Looks like we encountered an error, Please try again \"\n  }) : __jsx(Alert, {\n    btmText: `You'll receive an email at ${paymentResult.res.transfereeEmail} once your order is confirmed.`,\n    btnText: __jsx(Translate, {\n      id: \"common.continue-shopping\"\n    }),\n    topText: `Thank you for your order ${paymentResult.res.transfereeName} ${paymentResult.res.transfereeFamily}!`\n  }), __jsx(BoxStyle2, {\n    className: \"payment__payment-detail-cnt\"\n  }, __jsx(\"div\", {\n    className: \"row justify-content-between no-gutters\"\n  }, __jsx(\"div\", {\n    className: \"mb-5 mb-md-0 col-12 col-md-6 col-lg-7\"\n  }, __jsx(\"h2\", {\n    className: \"payment__box-header\"\n  }, __jsx(Translate, {\n    id: \"common.order\"\n  }), \" \\xA0 \", paymentResult.res.trackingCode), __jsx(\"div\", {\n    className: \"orderplaced__process-cnt\"\n  }, __jsx(GoodSituation, {\n    title: paymentResult.error ? __jsx(Translate, {\n      id: \"common.good-process.cancelled\"\n    }) : __jsx(Translate, {\n      id: \"common.good-process.processing\"\n    }),\n    id: paymentResult.error ? 100 : 3,\n    processing: true\n  })), !paymentResult.error && __jsx(\"div\", {\n    className: \"orderplaced__deliveryprogress-cnt\"\n  }, __jsx(DeliveryProgress, {\n    processing: true,\n    fillItemCount: 2,\n    stepCount: 4\n  })), __jsx(\"div\", {\n    className: \"mt-4\"\n  }, __jsx(\"div\", {\n    className: \"cart-aside__item\"\n  }, __jsx(\"span\", null, __jsx(\"span\", {\n    className: \"cart-aside__item-text\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.subtotal\"\n  })), __jsx(\"span\", {\n    className: \"cart-aside__item-text-sub\"\n  }, paymentResult.res.itemsCount, \"\\xA0\", paymentResult.res.itemsCount > 1 ? __jsx(Translate, {\n    id: \"common.items\"\n  }) : __jsx(Translate, {\n    id: \"common.item\"\n  }))), __jsx(\"div\", {\n    className: \"goodItem-s2__price-container\"\n  }, __jsx(\"span\", {\n    className: \"goodItem-s2__number\"\n  }, __jsx(Translate, {\n    id: curr\n  }), \"\\xA0\", formatMoney(paymentResult.res.totalWithOutDiscountCode - paymentResult.res.vat - paymentResult.res.shipping)))), __jsx(\"div\", {\n    className: \"cart-aside__item\"\n  }, __jsx(\"span\", null, __jsx(\"span\", {\n    className: \"cart-aside__item-text\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.shipping\"\n  }))), __jsx(\"span\", {\n    className: \"cart-aside__free\"\n  }, paymentResult.res.shipping === 0 ? __jsx(Translate, {\n    id: \"common.addressAside.free\"\n  }) : formatMoney(paymentResult.res.shipping))), paymentResult.res.vat > 0 && __jsx(\"div\", {\n    className: \"cart-aside__item\"\n  }, __jsx(\"span\", null, __jsx(\"span\", {\n    className: \"cart-aside__item-text\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.vat\"\n  }))), __jsx(\"div\", {\n    className: \"goodItem-s2__price-container\"\n  }, __jsx(\"span\", {\n    className: \"goodItem-s2__number\"\n  }, __jsx(Translate, {\n    id: curr\n  }), \"\\xA0\", formatMoney(paymentResult.res.vat)))), paymentResult.res.discount > 0 && __jsx(\"div\", {\n    className: \"cart-aside__item\"\n  }, __jsx(\"span\", null, __jsx(\"span\", {\n    className: \"cart-aside__item-text\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.discount\"\n  }))), __jsx(\"span\", {\n    className: \"cart-aside__discount\"\n  }, \"-\", __jsx(Translate, {\n    id: curr\n  }), \"\\xA0 \", formatMoney(paymentResult.res.discount))), __jsx(\"div\", {\n    className: \"cart-aside__item cart-aside__item--border\"\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\"\n  }, __jsx(\"h4\", {\n    className: \"mb-0 cart-aside__header\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.total\"\n  })), paymentResult.res.vat > 0 && __jsx(\"span\", {\n    className: \"ml-3 rtl-ml-0 rtl-mr-3 cart-aside__item-text-sub\"\n  }, __jsx(Translate, {\n    id: \"common.addressAside.inciusive\"\n  }))), __jsx(\"div\", {\n    className: \"goodItem-s2__price-container\"\n  }, paymentResult.res.discount > 0 && __jsx(\"span\", {\n    className: \"goodItem-s2__price-off d-block\"\n  }, __jsx(Translate, {\n    id: curr\n  }), \"\\xA0\", formatMoney(paymentResult.res.totalWithOutDiscountCode)))), __jsx(\"div\", {\n    className: \"cart-aside__item\"\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\"\n  }, __jsx(\"img\", {\n    src: creditIcon,\n    className: \"payment__icon\",\n    alt: \"credit icon\"\n  }), __jsx(\"span\", {\n    className: \"payment__text4 payment__text4--margin\"\n  }, __jsx(Translate, {\n    id: \"payment.pay-with-card\"\n  }))), __jsx(\"div\", {\n    className: \"goodItem-s2__price-container\"\n  }, __jsx(\"span\", {\n    className: \"goodItem-s2__number\"\n  }, __jsx(Translate, {\n    id: curr\n  }), \"\\xA0 \", formatMoney(paymentResult.res.total)))))), __jsx(\"div\", {\n    className: \"mt-5 mt-md-0 col-12 col-lg-4 col-md-5 d-flex flex-column justify-content-between\"\n  }, __jsx(ShipTo, {\n    withoutEdit: true,\n    data: paymentResult.res\n  }), __jsx(\"a\", {\n    href: \"\",\n    className: \"mt-0 mt-5 orderplaced__ship-link text-align-right\"\n  }, __jsx(Translate, {\n    id: \"orderplaced.go-to-order-detail\"\n  }))))), __jsx(ItemsBox, {\n    count: paymentResult.res.items.length,\n    items: paymentResult.res.items\n  }));\n};\n\nexport default OrderPlaced;","map":null,"metadata":{},"sourceType":"module"}