{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { BoxStyle1, GoodSituation, Pager } from \"../../../../../common\";\nimport { Switch, Route, useRouteMatch } from \"react-router\";\nimport NoOrdersPage from \"./OrdersLayouts/NoOrdersPage\";\nimport { Translate } from \"react-localize-redux\";\nimport arrowIcon from \"./../../../../../../assets/icons/img-down-arrow-white.svg\";\nimport arrowLink from \"./../../../../../../assets/icons/img-linear-arrow.svg\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport OrderDetail from \"./OrdersLayouts/OrderDetail\";\nimport OrderReview from \"./OrdersLayouts/OrderReview\";\nimport CancelOrders from \"./OrdersLayouts/CancelOrders\";\nimport { Scrollbars } from \"react-custom-scrollbars\";\nimport { selectLang } from \"../../../../../../appConfigSlice\";\nimport { format } from \"date-fns\";\nimport { LandScapePhonesAndBigger, LandScapePhones } from \"../../../../../../Responsive\";\nimport { client_getOrderList } from \"./../../../../../../lib/api/client/clientUserPanel\";\n\nvar renderBoxHeader = function renderBoxHeader() {\n  return __jsx(\"div\", {\n    className: \"profile-edit__header-container\"\n  }, __jsx(\"h2\", {\n    className: \"profile-edit__box-header\"\n  }, __jsx(Translate, {\n    id: \"orders.orders\"\n  })), __jsx(LandScapePhonesAndBigger, null, __jsx(\"p\", {\n    className: \"profile-edit__box-subheader\"\n  }, __jsx(Translate, {\n    id: \"orders.orders-des1\"\n  }))));\n};\n\nexport default (function () {\n  var _useState = useState(true),\n      emptyOrdersPage = _useState[0],\n      setEmptyOrdersPage = _useState[1];\n\n  var _useState2 = useState(1),\n      pageNumber = _useState2[0],\n      setPageNumber = _useState2[1];\n\n  var _useState3 = useState(3),\n      pageSize = _useState3[0],\n      setPageSize = _useState3[1];\n\n  var _useState4 = useState([]),\n      orderItems = _useState4[0],\n      setOrderItems = _useState4[1];\n\n  var _useState5 = useState(0),\n      totalNumber = _useState5[0],\n      setTotalNumber = _useState5[1];\n\n  var _useRouteMatch = useRouteMatch(),\n      path = _useRouteMatch.path,\n      url = _useRouteMatch.url; //this code is for Development purpose\n\n\n  var lang = useSelector(function (state) {\n    return state.appConfig.lang.code;\n  });\n  var currency = useSelector(function (state) {\n    return state.appConfig.currency.name;\n  }); // const activeLang = langs.find((lang) => {\n  //   return lang.active === true;\n  // });\n\n  var order_pre = process.env.NEXT_PUBLIC_Goods_PREFIX;\n  var download_pre = process.env.NEXT_PUBLIC_Download_PREFIX;\n  useEffect(function () {\n    var res = getData(pageNumber);\n    return function () {};\n  }, []);\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(pagenumber) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return client_getOrderList({\n                id: 0,\n                pageSize: pageSize,\n                pageNumber: pagenumber\n              });\n\n            case 2:\n              response = _context.sent;\n              setTotalNumber(response.result.count);\n              setOrderItems(response.result.data);\n\n              if (response.result.count == 0) {\n                setEmptyOrdersPage(true);\n              } else {\n                setEmptyOrdersPage(false);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var pageChangedAction = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pagenumber) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setPageNumber(pagenumber);\n              _context2.next = 3;\n              return getData(pagenumber);\n\n            case 3:\n              res = _context2.sent;\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function pageChangedAction(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Switch, null, __jsx(Route, {\n    strict: true,\n    path: \"\".concat(path, \"/:id/cancel\"),\n    render: function render(routeProps) {\n      return __jsx(CancelOrders, routeProps);\n    }\n  }), __jsx(Route, {\n    strict: true,\n    path: \"\".concat(path, \"/:id/:orderItemId/:good\"),\n    render: function render(routeProps) {\n      return __jsx(OrderReview, routeProps);\n    }\n  }), __jsx(Route, {\n    strict: true,\n    path: \"\".concat(path, \"/:id\"),\n    render: function render(routeProps) {\n      return __jsx(OrderDetail, routeProps);\n    }\n  }), __jsx(Route, {\n    path: \"\".concat(path)\n  }, emptyOrdersPage ? __jsx(NoOrdersPage, null) : __jsx(BoxStyle1, {\n    headerContent: renderBoxHeader()\n  }, __jsx(\"section\", {\n    className: \"orders\"\n  }, orderItems.map(function (item) {\n    return __jsx(\"article\", {\n      className: \"orders__item-cnt\"\n    }, __jsx(LandScapePhones, null, __jsx(Link, {\n      to: \"\".concat(url, \"/\").concat(item.orderId)\n    }, __jsx(\"header\", {\n      className: \"orders__item-header flex-wrap no-gutters\"\n    }, __jsx(\"img\", {\n      src: arrowLink,\n      alt: \"arrow\",\n      className: \"orders__mobile-arrow\"\n    }), __jsx(\"h2\", {\n      className: \"orders__item-cnt-header\"\n    }, __jsx(Translate, {\n      id: \"orders.orders\"\n    }), \" \\xA0\", item.trackingCode), __jsx(\"span\", {\n      className: \"col-md-auto col-12 orders__header-gray-text\"\n    }, __jsx(Translate, {\n      id: \"orders.placed-on\"\n    }), \" \", item.placedDateTime)))), __jsx(LandScapePhonesAndBigger, null, __jsx(\"header\", {\n      className: \"orders__item-header flex-wrap no-gutters\"\n    }, __jsx(\"h2\", {\n      className: \"orders__item-cnt-header\"\n    }, __jsx(Translate, {\n      id: \"orders.orders\"\n    }), \" \\xA0\", item.trackingCode), __jsx(\"span\", {\n      className: \"col-md-auto col-12 orders__header-gray-text\"\n    }, __jsx(Translate, {\n      id: \"orders.placed-on\"\n    }), \" \", format(new Date(item.placedDateTime), \"MMM dd , yyyy\")))), __jsx(\"div\", {\n      className: \"orders__order-cnt\"\n    }, __jsx(Scrollbars, {\n      renderView: function renderView(props) {\n        return __jsx(\"div\", _extends({}, props, {\n          className: \"deliveryPanel__scrol-view\"\n        }));\n      } // renderTrackVertical={(props) => (\n      //   <div\n      //     {...props}\n      //     className=\"deliveryPanel__track-vertical\"\n      //   />\n      // )}\n      // Hide delay in ms autoHideTimeout={1000}\n      // Duration for hide animation in ms. autoHideDuration={200}\n      ,\n      style: {\n        width: \"100%\",\n        height: \"203px\"\n      }\n    }, __jsx(\"ul\", {\n      className: \"orders__orders-list\"\n    }, item === null || item === void 0 ? void 0 : item.items.map(function (orderItems) {\n      return __jsx(\"li\", {\n        className: \"orders__order-item\"\n      }, orderItems.isDownloadable ? __jsx(\"a\", {\n        target: \"_blank\",\n        href: \"\".concat(download_pre, \"/\").concat(orderItems.goodsId, \"/\").concat(orderItems.downloadUrl)\n      }, __jsx(\"figure\", {\n        className: \"orders__img-fig\"\n      }, __jsx(\"img\", {\n        src: \"\".concat(order_pre, \"/\").concat(orderItems.goodsId, \"/\").concat(orderItems.goodsImage),\n        alt: \"item\",\n        className: \"orders__img\"\n      }), !orderItems.isDownloadable && __jsx(\"figcaption\", {\n        className: \"orders__fig-cap\"\n      }, __jsx(GoodSituation, {\n        id: orderItems.statusId,\n        title: orderItems.statusTitle\n      })))) : __jsx(\"a\", null, __jsx(\"figure\", {\n        className: \"orders__img-fig\"\n      }, __jsx(\"img\", {\n        src: \"\".concat(order_pre, \"/\").concat(orderItems.goodsId, \"/\").concat(orderItems.goodsImage),\n        alt: \"item\",\n        className: \"orders__img\"\n      }), !orderItems.isDownloadable && __jsx(\"figcaption\", {\n        className: \"orders__fig-cap\"\n      }, __jsx(GoodSituation, {\n        id: orderItems.statusId,\n        title: orderItems.statusTitle\n      })))));\n    }))), __jsx(\"div\", {\n      className: \"mt-5 mt-md-0 orders__right-cnt\"\n    }, __jsx(\"div\", {\n      className: \"orders__right-items\"\n    }, __jsx(\"span\", {\n      className: \"orders__text-bold\"\n    }, __jsx(Translate, {\n      id: \"orders.order-sum\"\n    }), __jsx(\"span\", {\n      className: \"orders__text-small\"\n    }, item.orderItemCount), __jsx(\"span\", {\n      className: \"orders__text-small\"\n    }, __jsx(Translate, {\n      id: \"orders.items\"\n    }))), __jsx(\"span\", {\n      className: \"mt-3 orders__text-bold d-block\"\n    }, currency, \" \", item.finalPrice.toLocaleString()), __jsx(LandScapePhonesAndBigger, null, __jsx(Link, {\n      to: \"\".concat(url, \"/\").concat(item.orderId),\n      className: \"primary-btn orders__btn\"\n    }, __jsx(Translate, {\n      id: \"orders.detail-view\"\n    }), __jsx(\"img\", {\n      className: \"orders__btn-arrow-icon\",\n      src: arrowIcon,\n      alt: \"arrow icon\"\n    })))))));\n  })), __jsx(Pager, {\n    count: Math.ceil(totalNumber / pageSize),\n    activeItem: pageNumber,\n    onPageClick: function onPageClick(pageNumber) {\n      pageChangedAction(pageNumber);\n    }\n  })))) // <BoxStyle1 headerContent={renderBoxHeader()}>\n  //   <section className=\"orders\">\n  //   </section>\n  // </BoxStyle1>\n  ;\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    lang: selectLang(state)\n  };\n};","map":null,"metadata":{},"sourceType":"module"}