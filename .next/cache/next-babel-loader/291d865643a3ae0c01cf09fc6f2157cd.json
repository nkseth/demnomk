{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport helpImage from \"./../../../assets/images/helpCenter.jpg\";\nimport HelpSearchIcon from \"./../../../assets/icons/help-search-icon.svg\";\nimport { client_getSearchResult } from \"../../../lib/api/client/clientHelpCenter\";\nimport { useSelector } from \"react-redux\";\nimport { selectCurr, selectLang } from \"../../../appConfigSlice\";\nimport { slugy } from \"../../../lib/helpers\";\nimport Link from \"next/link\";\nvar timer = null;\n\nvar HelpSubHeader = function HelpSubHeader(_ref) {\n  var img = _ref.img;\n\n  var _useState = useState(\"\"),\n      search = _useState[0],\n      setSearch = _useState[1];\n\n  var _useState2 = useState([]),\n      searchResult = _useState2[0],\n      setSearchResult = _useState2[1];\n\n  var lang = useSelector(selectLang);\n  var curr = useSelector(selectCurr);\n  var wrapperRef = useRef(null);\n\n  var removeResult = function removeResult(event) {\n    if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n      setSearch(\"\");\n      setSearchResult([]);\n    }\n  };\n\n  useEffect(function () {\n    document.addEventListener(\"mousedown\", removeResult);\n    return function () {\n      document.removeEventListener(\"mousedown\", removeResult);\n    };\n  }, []);\n\n  var onSearchChange = function onSearchChange(e) {\n    var q = e.target.value;\n    setSearch(q);\n\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    if (!q) {\n      setSearchResult([]);\n      return;\n    }\n\n    var callback = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(q) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return client_getSearchResult(q);\n\n              case 3:\n                res = _context.sent;\n                if (res.result) setSearchResult(res.result);\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                setSearchResult([]);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n\n      return function callback(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    timer = setTimeout(callback.bind(null, q), 500);\n  };\n\n  return __jsx(\"div\", {\n    className: \"subheader container-fluid p-0\"\n  }, __jsx(\"img\", {\n    src: img ? \"\".concat(process.env.NEXT_PUBLIC_LOGO_PREFIX, \"/\").concat(img) : helpImage,\n    alt: \"help center background\",\n    className: \"subheader__background\"\n  }), __jsx(\"div\", {\n    className: \"subheader__content\"\n  }, __jsx(\"h1\", {\n    className: \"subheader__header\"\n  }, __jsx(Translate, {\n    id: \"help-center-title\"\n  })), __jsx(\"div\", {\n    className: \"subheader__form-cnt\"\n  }, __jsx(\"label\", {\n    className: \"subheader__form-lable\",\n    htmlFor: \"help-search\"\n  }, __jsx(HelpSearchIcon, {\n    className: \"subheader__search-icon\"\n  }), __jsx(Translate, null, function (_ref3) {\n    var t = _ref3.translate;\n    return __jsx(\"input\", {\n      className: \"subheader__search-input\",\n      type: \"text\",\n      name: \"help-search\",\n      placeholder: t(\"help-center-search-placeholder\"),\n      value: search,\n      onChange: onSearchChange,\n      id: \"help-search\"\n    });\n  })), searchResult.length > 0 && __jsx(\"div\", {\n    ref: wrapperRef,\n    className: \"subheader__result-cnt\"\n  }, __jsx(\"ul\", {\n    className: \"subheader__list\"\n  }, searchResult.map(function (item) {\n    return __jsx(\"li\", {\n      className: \"subheader__item\"\n    }, __jsx(Link, {\n      href: \"/\".concat(curr, \"-\").concat(lang, \"/hc/articles/\").concat(item.articleId, \"/\").concat(slugy(item.subject))\n    }, __jsx(\"a\", {\n      onClick: function onClick() {\n        setSearchResult([]);\n        setSearch(\"\");\n      },\n      className: \"subheader__link\"\n    }, __jsx(\"span\", {\n      className: \"subheader__subject\"\n    }, item.subject), __jsx(\"span\", {\n      className: \"subheader__topic\"\n    }, \"\\xA0 -\\xA0 \", item.topic))));\n  }))))));\n};\n\nexport default HelpSubHeader;","map":null,"metadata":{},"sourceType":"module"}