{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport { UploadBox, Loading } from \"../../../../common\";\nimport { COMPLETE_AND_NEXT } from \"../CreateShopConstant\";\nimport { CreateShopContext } from \"../CreateShopContext\";\nimport { client_getShopActiveDocumentById } from \"./../../../../../lib/api/client/clientShop\";\nimport { IDENTIYGRPOUPID } from \"./../CreateShopConstant\";\n\nclass Document extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSelectFile\", (file, index) => {\n      this.state.files[index] = file[0];\n      this.state.filesModel[index].FileUrl = \"file.jpg\";\n      this.setState({\n        showUploadFileError: false\n      });\n    });\n\n    _defineProperty(this, \"handleClick\", () => {\n      let valid = true; // this.state.files.forEach((element) => {\n      //   if (element == null) {\n      //     this.setState({ showUploadFileError: true });\n      //     valid = false;\n      //   }\n      // });\n\n      if (valid) {\n        this.context.handleDocuments(this.state.filesModel, this.state.files);\n        this.context.handleStep(COMPLETE_AND_NEXT);\n      }\n    });\n\n    this.state = {\n      documents: [],\n      filesModel: [],\n      files: [],\n      showUploadFileError: false,\n      showComponent: false,\n      showLoader: false\n    };\n    this.handleSelectFile = this.handleSelectFile.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  async componentDidMount() {\n    this.setState({\n      showLoader: true\n    });\n    const result = await client_getShopActiveDocumentById(IDENTIYGRPOUPID);\n    this.setState({\n      documents: result.result\n    });\n\n    if (this.context.filesData.identityFiles.length > 0) {\n      this.setState({\n        files: this.context.filesData.identityFiles,\n        filesModel: this.context.filesData.identityFileDto\n      }, () => {\n        setTimeout(() => {\n          this.setState({\n            showComponent: true\n          });\n        }, 200);\n      });\n    } else {\n      result.result.forEach((item, index) => {\n        this.state.filesModel.push({\n          fileId: 0,\n          shopId: 0,\n          FkDocumentTypeId: this.state.documents[index].documentTypeId,\n          FileUrl: \"\",\n          index: index\n        });\n        this.state.files.push(null);\n      });\n      this.setState({\n        showComponent: true\n      });\n    }\n\n    this.setState({\n      showLoader: false\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"createshop__transition-cnt\"\n    }, this.state.showLoader ? __jsx(Loading, {\n      type: \"gray\",\n      width: \"11%\",\n      height: \"70%\"\n    }) : __jsx(\"div\", null, __jsx(\"div\", {\n      className: \"mt-5\"\n    }, __jsx(\"h3\", {\n      className: \"createshop__header-text\"\n    }, __jsx(Translate, {\n      id: \"document.document-msg1\"\n    })), __jsx(\"div\", {\n      className: \"createshop__form createshop__form--document\"\n    }, __jsx(Translate, null, ({\n      translate: t\n    }) => {\n      return __jsx(React.Fragment, null, this.state.showComponent && this.state.documents.map((item, index) => {\n        return __jsx(\"label\", {\n          className: \"auth__form-label\",\n          key: item.fkPersonId\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"document.upload\"\n        }), \" \", item.documentTitle), __jsx(UploadBox, {\n          handleSelectFile: this.handleSelectFile,\n          index: index,\n          oldFile: this.state.files\n        }), __jsx(\"div\", {\n          className: \"col-12 text-center\"\n        }, this.state.showUploadFileError && this.state.files[index] == null && __jsx(\"span\", {\n          className: \"country-error\"\n        }, __jsx(Translate, {\n          id: \"document.upload-file-error\"\n        }))));\n      }));\n    }))), __jsx(\"div\", {\n      className: \"createshop__btm text-align-center-ltr mb-5\"\n    }, __jsx(\"div\", {\n      className: \"auth__btn\"\n    }, __jsx(\"button\", {\n      onClick: this.handleClick,\n      className: \"createshop__primary-btn primary-btn\"\n    }, __jsx(Translate, {\n      id: \"country.next\"\n    }))))));\n  }\n\n}\n\n_defineProperty(Document, \"contextType\", CreateShopContext);\n\nexport default Document;","map":null,"metadata":{},"sourceType":"module"}