{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport { UploadBox, Loading } from \"../../../../common\";\nimport { COMPLETE_AND_NEXT } from \"../CreateShopConstant\";\nimport { CreateShopContext } from \"../CreateShopContext\";\nimport { FormErrorMsg } from \"../../../../common\";\nimport Select from \"react-select\";\nimport { client_getShopActiveDocumentById } from \"./../../../../../lib/api/client/clientShop\";\nimport { BANKGROUPID } from \"./../CreateShopConstant\";\n\nvar Bank = /*#__PURE__*/function (_React$Component) {\n  _inherits(Bank, _React$Component);\n\n  var _super = _createSuper(Bank);\n\n  function Bank(props) {\n    var _this;\n\n    _classCallCheck(this, Bank);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"setErrors\", function (func) {\n      var error = func(_this.state.errors);\n\n      _this.setState({\n        errors: error\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBenefityChange\", function (event) {\n      _this.setState({\n        beneficiary: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBankChange\", function (event) {\n      _this.setState({\n        bank: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBranchChange\", function (event) {\n      _this.setState({\n        branch: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAccountChange\", function (event) {\n      _this.setState({\n        account: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleIbanChange\", function (event) {\n      _this.setState({\n        iban: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSwiftCodeChange\", function (event) {\n      _this.setState({\n        swiftCode: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCurrencyChange\", function (event) {\n      _this.setState({\n        currencyId: event.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectFile\", function (file, index) {\n      _this.state.files[index] = file[0];\n      _this.state.filesModel[index].FileUrl = \"file.jpg\";\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (event) {\n      event.preventDefault();\n\n      for (var key in _this.state.errors) {\n        if (_this.state.errors[key]) {\n          return;\n        }\n      }\n\n      var valid = true; // this.state.files.forEach((element) => {\n      //   if (element == null) {\n      //     this.setState({ showUploadFileError: true });\n      //     valid = false;\n      //   }\n      // });\n\n      if (valid) {\n        _this.context.handleBank(_this.state.beneficiary, _this.state.bank, _this.state.branch, _this.state.account, _this.state.iban, _this.state.swiftCode, _this.state.currencyId, _this.state.files, _this.state.filesModel);\n\n        _this.context.handleStep(COMPLETE_AND_NEXT);\n      }\n    });\n\n    _this.state = {\n      beneficiary: \"\",\n      bank: \"\",\n      branch: \"\",\n      account: \"\",\n      iban: \"\",\n      swiftCode: \"\",\n      currencyId: 0,\n      errors: {},\n      filesModel: [],\n      files: [],\n      showComponent: false,\n      showUploadFileError: false,\n      showLoader: false,\n      currencyOptions: [{\n        value: 0,\n        label: \"Dollar\"\n      }, {\n        value: 1,\n        label: \"Dinar\"\n      }]\n    };\n    _this.handleBenefityChange = _this.handleBenefityChange.bind(_assertThisInitialized(_this));\n    _this.handleBankChange = _this.handleBankChange.bind(_assertThisInitialized(_this));\n    _this.handleBranchChange = _this.handleBranchChange.bind(_assertThisInitialized(_this));\n    _this.handleAccountChange = _this.handleAccountChange.bind(_assertThisInitialized(_this));\n    _this.handleIbanChange = _this.handleIbanChange.bind(_assertThisInitialized(_this));\n    _this.handleSwiftCodeChange = _this.handleSwiftCodeChange.bind(_assertThisInitialized(_this));\n    _this.handleCurrencyChange = _this.handleCurrencyChange.bind(_assertThisInitialized(_this));\n    _this.handleBenefityChange = _this.handleBenefityChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Bank, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState({\n                  showLoader: true\n                });\n                _context.next = 3;\n                return client_getShopActiveDocumentById(BANKGROUPID);\n\n              case 3:\n                result = _context.sent;\n                this.setState({\n                  documents: result.result\n                });\n\n                if (this.context.filesData.bankFiles.length > 0) {\n                  this.setState({\n                    beneficiary: this.context.formData.bankBeneficiaryName,\n                    bank: this.context.formData.bankName,\n                    branch: this.context.formData.bankBranch,\n                    account: this.context.formData.bankAccountNumber,\n                    iban: this.context.formData.bankIban,\n                    swiftCode: this.context.formData.bankSwiftCode,\n                    currencyId: this.context.formData.fkCurrencyId,\n                    files: this.context.filesData.bankFiles,\n                    filesModel: this.context.filesData.bankFileDto\n                  }, function () {\n                    setTimeout(function () {\n                      _this2.setState({\n                        showComponent: true\n                      });\n                    }, 200);\n                  });\n                } else {\n                  result.result.forEach(function (item, index) {\n                    _this2.state.filesModel.push({\n                      fileId: 0,\n                      shopId: 0,\n                      FkDocumentTypeId: _this2.state.documents[index].documentTypeId,\n                      FileUrl: \"\",\n                      index: index\n                    });\n\n                    _this2.state.files.push(null);\n                  });\n                  this.setState({\n                    showComponent: true\n                  });\n                }\n\n                this.setState({\n                  showLoader: false\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(\"form\", {\n        className: \"createshop__transition-cnt\",\n        onSubmit: this.handleSubmit\n      }, this.state.showLoader ? __jsx(Loading, {\n        type: \"gray\",\n        width: \"11%\",\n        height: \"70%\"\n      }) : __jsx(\"div\", null, __jsx(\"div\", {\n        className: \"mt-5\"\n      }, __jsx(\"h3\", {\n        className: \"createshop__header-text\"\n      }, __jsx(Translate, {\n        id: \"store.store-msg1\"\n      })), __jsx(\"div\", {\n        className: \"createshop__form createshop__form--bank\"\n      }, __jsx(Translate, null, function (_ref) {\n        var t = _ref.translate;\n        return __jsx(React.Fragment, null, __jsx(\"div\", {\n          className: \"createshop__form-cnt row justify-content-between\"\n        }, __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.bene-name\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.bene-name-placeholder\"),\n          onChange: _this3.handleBenefityChange,\n          value: _this3.state.beneficiary\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"ben\"],\n          msg: _this3.state.errors[\"ben\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.bank-name\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.bank-name-placeholder\"),\n          onChange: _this3.handleBankChange,\n          value: _this3.state.bank\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"bank\"],\n          msg: _this3.state.errors[\"bank\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.branch-name\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.branch-name-placeholder\"),\n          onChange: _this3.handleBranchChange,\n          value: _this3.state.branch\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"branch\"],\n          msg: _this3.state.errors[\"branch\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.acc-number\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.acc-number-placeholder\"),\n          onChange: _this3.handleAccountChange,\n          value: _this3.state.account\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"account\"],\n          msg: _this3.state.errors[\"account\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.IBAN-number\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.IBAN-number-placeholder\"),\n          onChange: _this3.handleIbanChange,\n          value: _this3.state.iban\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"iban\"],\n          msg: _this3.state.errors[\"iban\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12 col-sm-6\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.swift-code\"\n        })), __jsx(\"input\", {\n          className: \"gray__input\",\n          type: \"text\",\n          placeholder: t(\"bank.swift-code-placeholder\"),\n          onChange: _this3.handleSwiftCodeChange,\n          value: _this3.state.swiftCode\n        }), __jsx(FormErrorMsg, {\n          show: _this3.state.errors[\"swift\"],\n          msg: _this3.state.errors[\"swift\"]\n        }))), __jsx(\"div\", {\n          className: \"col-12\"\n        }, __jsx(\"label\", {\n          className: \"auth__form-label\"\n        }, __jsx(\"span\", {\n          className: \"auth__input-label\"\n        }, __jsx(Translate, {\n          id: \"bank.currency\"\n        })), __jsx(Select, {\n          className: \"react-select\",\n          options: _this3.state.currencyOptions,\n          onChange: _this3.handleCurrencyChange,\n          placeholder: t(\"bank.currency-placeholder\"),\n          value: _this3.state.currencyId == 0 ? _this3.state.currencyOptions[0] : _this3.state.currencyOptions[1],\n          required: true\n        }))), _this3.state.showComponent && _this3.state.documents.map(function (item, index) {\n          return __jsx(\"div\", {\n            className: \"col-12\",\n            key: item.fkPersonId\n          }, __jsx(\"p\", {\n            className: \"createshop__check-text mt-5\"\n          }, __jsx(Translate, {\n            id: \"document.upload\"\n          }), \" \", item.documentTitle), __jsx(UploadBox, {\n            className: \"createshop__centered-upload\",\n            handleSelectFile: _this3.handleSelectFile,\n            index: index,\n            oldFile: _this3.state.files\n          }), __jsx(\"div\", {\n            className: \"col-12 text-center mt-4\"\n          }, _this3.state.showUploadFileError && _this3.state.files[index] == null && __jsx(\"span\", {\n            className: \"country-error\"\n          }, __jsx(Translate, {\n            id: \"document.upload-file-error\"\n          }))));\n        })));\n      }))), __jsx(\"div\", {\n        className: \"createshop__btm text-align-center-ltr mb-5\"\n      }, __jsx(\"div\", {\n        className: \"auth__btn\"\n      }, __jsx(\"button\", {\n        type: \"submit\",\n        className: \"createshop__primary-btn primary-btn\"\n      }, __jsx(Translate, {\n        id: \"country.next\"\n      }))))));\n    }\n  }]);\n\n  return Bank;\n}(React.Component);\n\n_defineProperty(Bank, \"contextType\", CreateShopContext);\n\nexport default Bank;","map":null,"metadata":{},"sourceType":"module"}