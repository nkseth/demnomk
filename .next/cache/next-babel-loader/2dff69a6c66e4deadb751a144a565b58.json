{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport SearchInput from \"./LayoutsHeader/SearchInput/SearchInput\";\nimport logo from \"../../../assets/images/logo-2.png\";\nimport UserCheckIcon from \"./../../../assets/icons/img-header-profile.svg\";\nimport HeartOutlineIcon from \"./../../../assets/icons/img-header-heart.svg\";\nimport BuyButtonIcon from \"./../../../assets/icons/img-header-cart.svg\";\nimport arrowdownLight from \"./../../../assets/icons/img-header-arrow-down-light.svg\";\nimport { SelectBox } from \"../../common\";\nimport { connect } from \"react-redux\";\nimport { Translate } from \"react-localize-redux\";\nimport Link from \"next/link\";\nimport { withRouter } from \"next/router\";\nimport { selectCurr, selectLang, selectLogin } from \"../../../appConfigSlice\";\nimport { selectCartCount, selectWishCount, addWishCount, addCartCount } from \"../pages/CartAndWishlist/cartAndWishlistSlice\";\nimport { requestFirebaseNotificationPermission } from \"../../../firebaseInit.js\";\nimport { client_updateUserNotificationKey } from \"../../../lib/api/client/clientCommon\";\nimport { client_getHomeSerachAutoComplete } from \"../../../lib/api/client/clientHome\";\nimport SearchSugestion from \"./LayoutsHeader/SearchInput/SearchSugestion/SearchSugestion\";\nimport SearchIcon from \"./../../../assets/icons/search-gray.svg\";\nimport Nav from \"./LayoutsHeader/Nav/nav\";\n\nclass AppHeader extends React.Component {\n  constructor(props) {\n    super(props); //this code is for Development purpose\n\n    _defineProperty(this, \"state\", {\n      showSelectBoxLang: false,\n      showSelectBoxCurrency: false,\n      showAccountBox: false,\n      searchCilck: false,\n      search: \"\",\n      searchResultLoading: false,\n      searchData: []\n    });\n\n    _defineProperty(this, \"handleSearchChange\", async e => {\n      const value = e.target.value;\n      this.setState({\n        search: value,\n        searchResultLoading: true\n      });\n\n      try {\n        const result = await client_getHomeSerachAutoComplete(value);\n\n        if (result.result.goods.length != 0) {\n          this.setState({\n            searchData: result.result,\n            searchResultLoading: false\n          });\n        } else {\n          this.setState({\n            searchData: [],\n            searchResultLoading: false\n          });\n        }\n      } catch (error) {\n        this.setState({\n          searchData: [],\n          searchResultLoading: false\n        });\n      }\n    });\n\n    _defineProperty(this, \"handRedirectSearch\", e => {\n      if (e.which === 13 && this.state.search != null && this.state.search != undefined && this.state.search != \"\") {\n        this.props.router.push(`/${this.props.curr}-${this.props.lang}/search?search=${this.state.search}`);\n      }\n    });\n\n    this.activeCurrency = this.props.curr;\n    this.lang = this.props.lang;\n    this.activeLang = {\n      code: this.props.lang\n    };\n    this.data = this.props.data;\n    this.inputRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    var _this$props$data, _this$props$data2;\n\n    this.props.addCartCount((_this$props$data = this.props.data) === null || _this$props$data === void 0 ? void 0 : _this$props$data.cartCount);\n    this.props.addWishCount((_this$props$data2 = this.props.data) === null || _this$props$data2 === void 0 ? void 0 : _this$props$data2.wishListCount);\n    let isSafari = false;\n    var ua = navigator.userAgent.toLowerCase();\n\n    if (ua.indexOf(\"safari\") != -1) {\n      if (ua.indexOf(\"chrome\") > -1) {// alert(\"1\"); // Chrome\n      } else {\n        // alert(\"2\"); // Safari\n        isSafari = true;\n      }\n    }\n\n    if (!isSafari) {\n      requestFirebaseNotificationPermission().then(firebaseToken => {\n        // eslint-disable-next-line no-console\n        console.log(\"Firebase Toke: \", firebaseToken);\n\n        if (firebaseToken && this.props.isLogin == true) {\n          console.log(\"Send token to server\");\n          client_updateUserNotificationKey(firebaseToken);\n        }\n      }).catch(err => {\n        return err;\n      });\n    }\n  }\n\n  render() {\n    var _this$data;\n\n    const data = this.data;\n    return __jsx(\"header\", {\n      className: \"header \"\n    }, data.liveChatStatus && this.props.isDesktop && __jsx(\"script\", {\n      type: \"text/javascript\",\n      id: \"hs-script-loader\",\n      async: true,\n      defer: true,\n      src: \"//js.hs-scripts.com/8803827.js\"\n    }), __jsx(\"div\", null, this.props.isDesktop && __jsx(\"section\", {\n      className: \"header-top\"\n    }, __jsx(\"div\", {\n      className: \"header-top__container container siteWidthContainer\"\n    }, __jsx(\"div\", {\n      className: \"header-top__item header-top__item--left-padding\"\n    }, data.logoUrlShopHeader && __jsx(Link, {\n      href: \"/[lang-curr]\",\n      as: `/${this.props.curr}-${this.props.lang}`\n    }, __jsx(\"a\", {\n      className: \"header-top__item-link\"\n    }, __jsx(\"img\", {\n      src: `${process.env.NEXT_PUBLIC_LOGO_PREFIX}/${data.logoUrlShopHeader}`,\n      alt: \"website logo\",\n      className: \"header-top__logo\"\n    })))), __jsx(\"div\", {\n      className: \"header-top__item header-top__item--fill header-top__item--flex\"\n    }, __jsx(Translate, null, ({\n      translate\n    }) => {\n      return __jsx(SearchInput, {\n        placeholder: translate(\"searchPlaceholder\"),\n        lang: this.lang,\n        curr: this.activeCurrency,\n        search: translate(\"search\"),\n        history: this.props.router\n      });\n    }), __jsx(\"a\", {\n      onClick: () => {\n        this.setState({\n          showSelectBoxLang: this.state.showSelectBoxLang ? false : true,\n          showSelectBoxCurrency: false,\n          showAccountBox: false\n        });\n      },\n      className: \"header-top__item-drop-container d-flex align-align-items-center\"\n    }, __jsx(\"span\", {\n      className: \"header-top__item-text\"\n    }, __jsx(Translate, {\n      id: \"lang\"\n    })), __jsx(\"img\", {\n      src: arrowdownLight,\n      className: \"nav__item-svg\",\n      alt: \"arrowdownLight\"\n    }), this.state.showSelectBoxLang ? __jsx(SelectBox, {\n      type: \"lang\",\n      lang: this.lang,\n      currency: this.activeCurrency\n    }) : null), __jsx(\"a\", {\n      onClick: () => {\n        this.setState({\n          showSelectBoxLang: false,\n          showAccountBox: false,\n          showSelectBoxCurrency: this.state.showSelectBoxCurrency ? false : true\n        });\n      },\n      ref: this.wrapperRef,\n      className: \"header-top__item-drop-container d-flex align-align-items-center\"\n    }, __jsx(\"span\", {\n      className: \"header-top__item-text\"\n    }, this.activeCurrency.toUpperCase()), __jsx(\"img\", {\n      src: arrowdownLight,\n      className: \"nav__item-svg\",\n      alt: \"arrowdownLight\"\n    }), this.state.showSelectBoxCurrency ? __jsx(SelectBox, {\n      lang: this.lang,\n      currency: this.activeCurrency,\n      type: \"currency\"\n    }) : null)), __jsx(\"div\", {\n      className: \"header-top__item header-top__item--icon-margin\"\n    }, __jsx(\"div\", {\n      className: \"header-top__item-container\"\n    }, __jsx(\"a\", {\n      onClick: () => {\n        this.setState({\n          showSelectBoxLang: false,\n          showSelectBoxCurrency: false,\n          showAccountBox: !this.state.showAccountBox\n        });\n      },\n      className: \"header-top__item-link\"\n    }, __jsx(\"div\", null, __jsx(\"span\", {\n      className: \"header-top__item-text-up\"\n    }, this.props.isLogin ? (_this$data = this.data) === null || _this$data === void 0 ? void 0 : _this$data.customerFullName : __jsx(Translate, {\n      id: \"singin\"\n    })), __jsx(\"span\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      className: \"header-top__item-text mr-3\"\n    }, this.props.isLogin ? __jsx(Translate, {\n      id: \"my-account\"\n    }) : __jsx(Translate, {\n      id: \"account\"\n    }), __jsx(\"img\", {\n      src: arrowdownLight,\n      className: \"nav__item-svg\",\n      alt: \"arrowdownLight\"\n    }))), __jsx(\"img\", {\n      src: UserCheckIcon,\n      className: \"header-top__item-icon header-top__item-icon--user\",\n      alt: \"UserCheckIcon\"\n    }), this.state.showAccountBox ? __jsx(SelectBox, {\n      lang: this.lang,\n      currency: this.activeCurrency,\n      className: \"dropAccount\",\n      type: \"account\"\n    }) : null))), __jsx(\"div\", {\n      className: \"header-top__item header-top__item--icon-margin\"\n    }, __jsx(\"div\", {\n      className: \"header-top__item-container\"\n    }, __jsx(\"a\", {\n      href: `/${this.props.curr}-${this.props.lang}/cart`,\n      className: \"header-top__item-link header-top__item-link--relative\"\n    }, __jsx(\"span\", {\n      className: \"header-top__item-text mr-3\"\n    }, __jsx(Translate, {\n      id: \"wishlist\"\n    })), this.props.wishCount > 0 && __jsx(\"span\", {\n      className: \"header-top__badge\"\n    }, this.props.wishCount), __jsx(\"img\", {\n      src: HeartOutlineIcon,\n      className: \"header-top__item-icon header-top__item-icon--heart\",\n      alt: \"HeartOutlineIcon\"\n    })))), __jsx(\"div\", {\n      className: \"header-top__item\"\n    }, __jsx(\"div\", {\n      className: \"header-top__item-container header-top__item--icon-margin\"\n    }, __jsx(\"a\", {\n      href: `/${this.props.curr}-${this.props.lang}/cart`,\n      className: \"header-top__item-link\"\n    }, __jsx(\"span\", {\n      className: \"header-top__item-text mr-3\"\n    }, __jsx(Translate, {\n      id: \"cart\"\n    })), this.props.cartCount > 0 && __jsx(\"span\", {\n      className: \"header-top__badge\"\n    }, this.props.cartCount), __jsx(\"img\", {\n      src: BuyButtonIcon,\n      className: \"header-top__item-icon header-top__item-icon--buy\",\n      alt: \"BuyButtonIcon\"\n    }))))))), __jsx(Translate, null, ({\n      translate\n    }) => {\n      return __jsx(\"div\", null, this.props.isDesktop ? __jsx(Nav, {\n        params: this.lang,\n        content: translate,\n        data: data\n      }) : __jsx(\"div\", {\n        className: \"header__mobileMenu\"\n      }, data.logoUrlShopHeader && __jsx(Link, {\n        href: \"/[lang-curr]\",\n        as: `/${this.props.curr}-${this.props.lang}`\n      }, __jsx(\"a\", {\n        className: \"header-top__item-link mr-4 ml-4\"\n      }, __jsx(\"img\", {\n        src: logo,\n        alt: \"mobile logo\",\n        className: \"header__mobileMenu--logo\"\n      }))), __jsx(\"div\", {\n        className: \"header__mobileMenu--search\"\n      }, __jsx(Link, {\n        href: `/${this.props.curr}-${this.props.lang}/search?search=${this.state.search}`\n      }, __jsx(\"a\", null, __jsx(SearchIcon, {\n        className: \"mobile-search-input-icon\"\n      }))), __jsx(\"input\", {\n        ref: this.inputRef,\n        onChange: this.handleSearchChange.bind(this),\n        type: \"text\",\n        value: this.state.search,\n        onKeyPress: this.handRedirectSearch,\n        placeholder: translate(\"searchPlaceholder\")\n      })), this.state.searchData.length != 0 && __jsx(\"div\", {\n        className: \"searchResultMobile\"\n      }, __jsx(SearchSugestion, {\n        showLoader: this.state.searchResultLoading,\n        data: this.state.searchData\n      }))));\n    }));\n  }\n\n}\n\nconst mapDispatchToProps = {\n  addCartCount,\n  addWishCount\n};\n\nconst mapStateToProps = state => {\n  return {\n    isLogin: selectLogin(state).isLogin,\n    lang: selectLang(state),\n    curr: selectCurr(state),\n    cartCount: selectCartCount(state),\n    wishCount: selectWishCount(state)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(AppHeader));","map":null,"metadata":{},"sourceType":"module"}