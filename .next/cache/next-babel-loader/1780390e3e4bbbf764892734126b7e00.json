{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport { useSelector } from \"react-redux\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { selectLang } from \"../../../../../../appConfigSlice\";\nimport { client_getPreference, client_setPreference } from \"../../../../../../lib/api/client/clientUserPanel\";\nimport { getErrorMsg } from \"../../../../../../lib/helpers\";\nimport { isRtl } from \"../../../../../../lib/isRtl\";\nimport { getToastConfig } from \"../../../../../../lib/toast\";\nimport { BoxStyle1, Loading, SelectBox3 as SelectBox } from \"../../../../../common\";\nimport ajyallWallet from \"./../../../../../../assets/icons/ajyal-wallet.png\";\nimport creditIcon from \"./../../../../../../assets/icons/img-credit-card.svg\";\nvar WALLET = 1;\nvar CART = 2;\n\nvar renderBoxHeader = function renderBoxHeader() {\n  return __jsx(\"div\", {\n    className: \"profile-edit__header-container\"\n  }, __jsx(\"h2\", {\n    className: \"profile-edit__box-header\"\n  }, __jsx(Translate, {\n    id: \"preference.preference\"\n  })), __jsx(\"p\", {\n    className: \"profile-edit__box-subheader\"\n  }, __jsx(Translate, {\n    id: \"preference.msg1\"\n  })));\n};\n\nvar selectedItem = null;\n\nvar Preference = function Preference() {\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      saveLoading = _useState2[0],\n      setSaveLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      result = _useState3[0],\n      setResult = _useState3[1];\n\n  var lang = useSelector(selectLang);\n  useEffect(function () {\n    client_getPreference().then(function (res) {\n      setResult(res.result);\n      selectedItem = res.result;\n      setLoading(false);\n    })[\"catch\"](function (err) {\n      toast.error(err.response.data.message, getToastConfig());\n    });\n  }, []);\n\n  var handleSelectItem = function handleSelectItem(item) {\n    console.log(item);\n    if (item.length > 0) selectedItem = item[0].name;else selectedItem = null;\n    console.log(selectedItem);\n  };\n\n  var handleSave = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!saveLoading) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              console.log(selectedItem); // return;\n\n              if (selectedItem) {\n                _context.next = 6;\n                break;\n              }\n\n              toast.error(getErrorMsg(lang, \"select-Item\"), getToastConfig());\n              return _context.abrupt(\"return\");\n\n            case 6:\n              setSaveLoading(true);\n              _context.prev = 7;\n              _context.next = 10;\n              return client_setPreference(selectedItem);\n\n            case 10:\n              res = _context.sent;\n              toast.success(getErrorMsg(lang, \"refund-saved\"), getToastConfig());\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](7);\n              toast.error(_context.t0.response.data.message, getToastConfig());\n\n            case 17:\n              _context.prev = 17;\n              setSaveLoading(false);\n              return _context.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 14, 17, 20]]);\n    }));\n\n    return function handleSave() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(ToastContainer, _extends({\n    rtl: isRtl(lang)\n  }, getToastConfig())), __jsx(BoxStyle1, {\n    headerContent: renderBoxHeader()\n  }, __jsx(\"section\", {\n    className: \"container-fluid profile-edit preference\"\n  }, loading ? __jsx(Loading, {\n    type: \"gray\",\n    width: \"50px\",\n    height: \"50px\"\n  }) : __jsx(React.Fragment, null, __jsx(SelectBox, {\n    selectedItems: result ? [{\n      name: result\n    }] : [],\n    className: \"payment__select-cnt mt-5 mb-5\",\n    onChange: handleSelectItem\n  }, __jsx(SelectBox.SelectItem, {\n    name: WALLET\n  }, __jsx(\"img\", {\n    src: ajyallWallet,\n    className: \"payment__icon\",\n    alt: \"cash icon\"\n  }), __jsx(\"span\", {\n    className: \"payment__text4 payment__text4--margin\"\n  }, __jsx(Translate, {\n    id: \"preference.wallet\"\n  })), __jsx(\"p\", {\n    className: \"payment__text2 mt-3\"\n  }, __jsx(Translate, {\n    id: \"preference.wallet-msg\"\n  }))), __jsx(SelectBox.SelectItem, {\n    name: CART\n  }, __jsx(\"img\", {\n    src: creditIcon,\n    className: \"payment__icon\",\n    alt: \"cash icon\"\n  }), __jsx(\"span\", {\n    className: \"payment__text4 payment__text4--margin\"\n  }, __jsx(Translate, {\n    id: \"preference.card\"\n  })), __jsx(\"p\", {\n    className: \"payment__text2 mt-3\"\n  }, __jsx(Translate, {\n    id: \"preference.card-msg\"\n  })))), __jsx(\"div\", {\n    className: \"preference__btn-cnt\"\n  }, __jsx(\"button\", {\n    className: \"primary-btn\",\n    onClick: handleSave\n  }, saveLoading ? __jsx(Loading, {\n    type: \"white\",\n    \"with\": \"20px\",\n    height: \"20px\"\n  }) : __jsx(Translate, {\n    id: \"common.save\"\n  })))))));\n};\n\nexport default Preference;","map":null,"metadata":{},"sourceType":"module"}