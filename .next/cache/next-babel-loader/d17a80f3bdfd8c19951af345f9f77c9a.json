{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useState } from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport { useSelector } from \"react-redux\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { selectLang } from \"../../../../../../appConfigSlice\";\nimport { client_getPreference, client_setPreference } from \"../../../../../../lib/api/client/clientUserPanel\";\nimport { getErrorMsg } from \"../../../../../../lib/helpers\";\nimport { isRtl } from \"../../../../../../lib/isRtl\";\nimport { getToastConfig } from \"../../../../../../lib/toast\";\nimport { BoxStyle1, Loading, SelectBox3 as SelectBox } from \"../../../../../common\";\nimport ajyallWallet from \"./../../../../../../assets/icons/ajyal-wallet.png\";\nimport creditIcon from \"./../../../../../../assets/icons/img-credit-card.svg\";\nconst WALLET = 1;\nconst CART = 2;\n\nconst renderBoxHeader = () => {\n  return __jsx(\"div\", {\n    className: \"profile-edit__header-container\"\n  }, __jsx(\"h2\", {\n    className: \"profile-edit__box-header\"\n  }, __jsx(Translate, {\n    id: \"preference.preference\"\n  })), __jsx(\"p\", {\n    className: \"profile-edit__box-subheader\"\n  }, __jsx(Translate, {\n    id: \"preference.msg1\"\n  })));\n};\n\nlet selectedItem = null;\n\nconst Preference = () => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: saveLoading,\n    1: setSaveLoading\n  } = useState(false);\n  const {\n    0: result,\n    1: setResult\n  } = useState(null);\n  const lang = useSelector(selectLang);\n  useEffect(() => {\n    client_getPreference().then(res => {\n      setResult(res.result);\n      selectedItem = res.result;\n      setLoading(false);\n    }).catch(err => {\n      toast.error(err.response.data.message, getToastConfig());\n    });\n  }, []);\n\n  const handleSelectItem = item => {\n    console.log(item);\n    if (item.length > 0) selectedItem = item[0].name;else selectedItem = null;\n    console.log(selectedItem);\n  };\n\n  const handleSave = async () => {\n    if (saveLoading) return;\n    console.log(selectedItem); // return;\n\n    if (!selectedItem) {\n      toast.error(getErrorMsg(lang, \"select-Item\"), getToastConfig());\n      return;\n    }\n\n    setSaveLoading(true);\n\n    try {\n      const res = await client_setPreference(selectedItem);\n      toast.success(getErrorMsg(lang, \"refund-saved\"), getToastConfig());\n    } catch (err) {\n      toast.error(err.response.data.message, getToastConfig());\n    } finally {\n      setSaveLoading(false);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(ToastContainer, _extends({\n    rtl: isRtl(lang)\n  }, getToastConfig())), __jsx(BoxStyle1, {\n    headerContent: renderBoxHeader()\n  }, __jsx(\"section\", {\n    className: \"container-fluid profile-edit preference\"\n  }, loading ? __jsx(Loading, {\n    type: \"gray\",\n    width: \"50px\",\n    height: \"50px\"\n  }) : __jsx(React.Fragment, null, __jsx(SelectBox, {\n    selectedItems: result ? [{\n      name: result\n    }] : [],\n    className: \"payment__select-cnt mt-5 mb-5\",\n    onChange: handleSelectItem\n  }, __jsx(SelectBox.SelectItem, {\n    name: WALLET\n  }, __jsx(\"img\", {\n    src: ajyallWallet,\n    className: \"payment__icon\",\n    alt: \"cash icon\"\n  }), __jsx(\"span\", {\n    className: \"payment__text4 payment__text4--margin\"\n  }, __jsx(Translate, {\n    id: \"preference.wallet\"\n  })), __jsx(\"p\", {\n    className: \"payment__text2 mt-3\"\n  }, __jsx(Translate, {\n    id: \"preference.wallet-msg\"\n  }))), __jsx(SelectBox.SelectItem, {\n    name: CART\n  }, __jsx(\"img\", {\n    src: creditIcon,\n    className: \"payment__icon\",\n    alt: \"cash icon\"\n  }), __jsx(\"span\", {\n    className: \"payment__text4 payment__text4--margin\"\n  }, __jsx(Translate, {\n    id: \"preference.card\"\n  })), __jsx(\"p\", {\n    className: \"payment__text2 mt-3\"\n  }, __jsx(Translate, {\n    id: \"preference.card-msg\"\n  })))), __jsx(\"div\", {\n    className: \"preference__btn-cnt\"\n  }, __jsx(\"button\", {\n    className: \"primary-btn\",\n    onClick: handleSave\n  }, saveLoading ? __jsx(Loading, {\n    type: \"white\",\n    with: \"20px\",\n    height: \"20px\"\n  }) : __jsx(Translate, {\n    id: \"common.save\"\n  })))))));\n};\n\nexport default Preference;","map":null,"metadata":{},"sourceType":"module"}