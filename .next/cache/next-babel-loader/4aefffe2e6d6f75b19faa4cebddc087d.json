{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Translate } from \"react-localize-redux\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { selectLang } from \"../../../../../appConfigSlice\";\nimport { client_changeForgetPass } from \"../../../../../lib/api/client/clientCustomer\";\nimport { validateConfirmPassword, validatePassword } from \"../../../../../lib/formValidator\";\nimport { getErrorMsg } from \"../../../../../lib/helpers\";\nimport { getToastConfig } from \"../../../../../lib/toast\";\nimport { Button, FormErrorMsg, Loading } from \"../../../../common\";\nimport { SIGNIN } from \"../SignIn/SignIn\";\n\nconst EnterNewPassWord = ({\n  dis,\n  forgotEmail\n}) => {\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: confirmPassword,\n    1: setConfirmPassword\n  } = useState(\"\");\n  const {\n    0: errors,\n    1: setErrors\n  } = useState({});\n  const {\n    0: submitStatus,\n    1: setSubmitStatus\n  } = useState(false);\n  const lang = useSelector(selectLang);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (submitStatus) return;\n\n    for (let key in errors) {\n      if (errors[key]) {\n        toast.error(getErrorMsg(lang, \"error-detected\"), getToastConfig());\n        return;\n      }\n    }\n\n    setSubmitStatus(true);\n\n    try {\n      const res = await client_changeForgetPass({\n        email: forgotEmail,\n        pass: password\n      });\n      toast.success(res.message, getToastConfig());\n      dis({\n        type: SIGNIN\n      });\n    } catch (err) {\n      toast.error(err.response.data.message, getToastConfig());\n      setSubmitStatus(false);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"forgetpass\" // onClick={() => {\n    //   dis({ type: VERIFY_EMAIL });\n    // }}\n\n  }, __jsx(\"section\", {\n    style: {\n      width: \"100%\"\n    }\n  }, __jsx(\"h4\", {\n    className: \"auth__header-sub text-align-center-ltr mb-5\"\n  }, __jsx(Translate, {\n    id: \"change-pass\"\n  })), __jsx(\"div\", {\n    className: \"forgetpass__input-cnt\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(Translate, null, ({\n    translate\n  }) => {\n    return __jsx(React.Fragment, null, __jsx(\"label\", {\n      className: \"auth__form-label auth__form-label--signup\"\n    }, __jsx(\"span\", {\n      className: \"auth__input-label\"\n    }, __jsx(Translate, {\n      id: \"new-pass\"\n    })), __jsx(\"input\", {\n      className: \"auth__input\",\n      type: \"password\",\n      placeholder: translate(\"new-pass-placeholder\"),\n      onBlur: e => {\n        validatePassword({\n          name: \"password\",\n          value: e.target.value,\n          handler: setErrors,\n          lang\n        });\n      },\n      onChange: event => {\n        setPassword(event.target.value);\n        validateConfirmPassword({\n          name: \"cpassword\",\n          value1: event.target.value,\n          value2: confirmPassword,\n          handler: setErrors,\n          lang\n        });\n      },\n      value: password,\n      name: \"password\",\n      required: true\n    }), __jsx(FormErrorMsg, {\n      show: errors[\"password\"],\n      msg: errors[\"password\"]\n    })), __jsx(\"label\", {\n      className: \"auth__form-label auth__form-label--signup mt-5\"\n    }, __jsx(\"span\", {\n      className: \"auth__input-label\"\n    }, __jsx(Translate, {\n      id: \"pas-confirm\"\n    })), __jsx(\"input\", {\n      required: true,\n      className: \"auth__input\",\n      type: \"password\",\n      onBlur: e => {\n        validateConfirmPassword({\n          name: e.target.name,\n          value1: password,\n          value2: e.target.value,\n          handler: setErrors,\n          lang\n        });\n      },\n      onChange: event => {\n        setConfirmPassword(event.target.value);\n        validateConfirmPassword({\n          name: event.target.name,\n          value1: password,\n          value2: event.target.value,\n          handler: setErrors,\n          lang\n        });\n      },\n      value: confirmPassword,\n      name: \"cpassword\",\n      placeholder: translate(\"cpass-placeholder\")\n    }), __jsx(FormErrorMsg, {\n      show: errors[\"cpassword\"],\n      msg: errors[\"cpassword\"]\n    })));\n  }), __jsx(\"div\", {\n    className: \"forgetpass__btn-cnt\"\n  }, __jsx(Button, {\n    radius: \"true\",\n    value: submitStatus ? __jsx(Loading, {\n      type: \"white\",\n      width: \"20px\",\n      height: \"20px\"\n    }) : __jsx(Translate, {\n      id: \"submit\"\n    })\n  }))))));\n};\n\nexport default EnterNewPassWord;","map":null,"metadata":{},"sourceType":"module"}