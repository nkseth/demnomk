{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport SearchInput from \"./LayoutsHeader/SearchInput/SearchInput\";\nimport logo from \"../../../assets/images/logo-2.png\";\nimport UserCheckIcon from \"./../../../assets/icons/img-header-profile.svg\";\nimport HeartOutlineIcon from \"./../../../assets/icons/img-header-heart.svg\";\nimport BuyButtonIcon from \"./../../../assets/icons/img-header-cart.svg\";\nimport arrowdownLight from \"./../../../assets/icons/img-header-arrow-down-light.svg\";\nimport { SelectBox } from \"../../common\";\nimport { connect } from \"react-redux\";\nimport { Translate } from \"react-localize-redux\";\nimport Link from \"next/link\";\nimport { withRouter } from \"next/router\";\nimport { selectCurr, selectLang, selectLogin } from \"../../../appConfigSlice\";\nimport { selectCartCount, selectWishCount, addWishCount, addCartCount } from \"../pages/CartAndWishlist/cartAndWishlistSlice\";\nimport { requestFirebaseNotificationPermission } from \"../../../firebaseInit.js\";\nimport { client_updateUserNotificationKey } from \"../../../lib/api/client/clientCommon\";\nimport { client_getHomeSerachAutoComplete } from \"../../../lib/api/client/clientHome\";\nimport SearchSugestion from \"./LayoutsHeader/SearchInput/SearchSugestion/SearchSugestion\";\nimport SearchIcon from \"./../../../assets/icons/search-gray.svg\";\nimport Nav from \"./LayoutsHeader/Nav/nav\";\n\nvar AppHeader = /*#__PURE__*/function (_React$Component) {\n  _inherits(AppHeader, _React$Component);\n\n  var _super = _createSuper(AppHeader);\n\n  function AppHeader(props) {\n    var _this;\n\n    _classCallCheck(this, AppHeader);\n\n    _this = _super.call(this, props); //this code is for Development purpose\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showSelectBoxLang: false,\n      showSelectBoxCurrency: false,\n      showAccountBox: false,\n      searchCilck: false,\n      search: \"\",\n      searchResultLoading: false,\n      searchData: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSearchChange\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var value, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                value = e.target.value;\n\n                _this.setState({\n                  search: value,\n                  searchResultLoading: true\n                });\n\n                _context.prev = 2;\n                _context.next = 5;\n                return client_getHomeSerachAutoComplete(value);\n\n              case 5:\n                result = _context.sent;\n\n                if (result.result.goods.length != 0) {\n                  _this.setState({\n                    searchData: result.result,\n                    searchResultLoading: false\n                  });\n                } else {\n                  _this.setState({\n                    searchData: [],\n                    searchResultLoading: false\n                  });\n                }\n\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n\n                _this.setState({\n                  searchData: [],\n                  searchResultLoading: false\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handRedirectSearch\", function (e) {\n      if (e.which === 13 && _this.state.search != null && _this.state.search != undefined && _this.state.search != \"\") {\n        _this.props.router.push(\"/\".concat(_this.props.curr, \"-\").concat(_this.props.lang, \"/search?search=\").concat(_this.state.search));\n      }\n    });\n\n    _this.activeCurrency = _this.props.curr;\n    _this.lang = _this.props.lang;\n    _this.activeLang = {\n      code: _this.props.lang\n    };\n    _this.data = _this.props.data;\n    _this.inputRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(AppHeader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$data,\n          _this$props$data2,\n          _this2 = this;\n\n      this.props.addCartCount((_this$props$data = this.props.data) === null || _this$props$data === void 0 ? void 0 : _this$props$data.cartCount);\n      this.props.addWishCount((_this$props$data2 = this.props.data) === null || _this$props$data2 === void 0 ? void 0 : _this$props$data2.wishListCount);\n      var isSafari = false;\n      var ua = navigator.userAgent.toLowerCase();\n\n      if (ua.indexOf(\"safari\") != -1) {\n        if (ua.indexOf(\"chrome\") > -1) {// alert(\"1\"); // Chrome\n        } else {\n          // alert(\"2\"); // Safari\n          isSafari = true;\n        }\n      }\n\n      if (!isSafari) {\n        requestFirebaseNotificationPermission().then(function (firebaseToken) {\n          // eslint-disable-next-line no-console\n          console.log(\"Firebase Toke: \", firebaseToken);\n\n          if (firebaseToken && _this2.props.isLogin == true) {\n            console.log(\"Send token to server\");\n            client_updateUserNotificationKey(firebaseToken);\n          }\n        })[\"catch\"](function (err) {\n          return err;\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this,\n          _this$data;\n\n      var data = this.data;\n      return __jsx(\"header\", {\n        className: \"header \"\n      }, data.liveChatStatus && this.props.isDesktop && __jsx(\"script\", {\n        type: \"text/javascript\",\n        id: \"hs-script-loader\",\n        async: true,\n        defer: true,\n        src: \"//js.hs-scripts.com/8803827.js\"\n      }), __jsx(\"div\", null, this.props.isDesktop && __jsx(\"section\", {\n        className: \"header-top\"\n      }, __jsx(\"div\", {\n        className: \"header-top__container container siteWidthContainer\"\n      }, __jsx(\"div\", {\n        className: \"header-top__item header-top__item--left-padding\"\n      }, data.logoUrlShopHeader && __jsx(Link, {\n        href: \"/[lang-curr]\",\n        as: \"/\".concat(this.props.curr, \"-\").concat(this.props.lang)\n      }, __jsx(\"a\", {\n        className: \"header-top__item-link\"\n      }, __jsx(\"img\", {\n        src: \"\".concat(process.env.NEXT_PUBLIC_LOGO_PREFIX, \"/\").concat(data.logoUrlShopHeader),\n        alt: \"website logo\",\n        className: \"header-top__logo\"\n      })))), __jsx(\"div\", {\n        className: \"header-top__item header-top__item--fill header-top__item--flex\"\n      }, __jsx(Translate, null, function (_ref2) {\n        var translate = _ref2.translate;\n        return __jsx(SearchInput, {\n          placeholder: translate(\"searchPlaceholder\"),\n          lang: _this3.lang,\n          curr: _this3.activeCurrency,\n          search: translate(\"search\"),\n          history: _this3.props.router\n        });\n      }), __jsx(\"a\", {\n        onClick: function onClick() {\n          _this3.setState({\n            showSelectBoxLang: _this3.state.showSelectBoxLang ? false : true,\n            showSelectBoxCurrency: false,\n            showAccountBox: false\n          });\n        },\n        className: \"header-top__item-drop-container d-flex align-align-items-center\"\n      }, __jsx(\"span\", {\n        className: \"header-top__item-text\"\n      }, __jsx(Translate, {\n        id: \"lang\"\n      })), __jsx(\"img\", {\n        src: arrowdownLight,\n        className: \"nav__item-svg\",\n        alt: \"arrowdownLight\"\n      }), this.state.showSelectBoxLang ? __jsx(SelectBox, {\n        type: \"lang\",\n        lang: this.lang,\n        currency: this.activeCurrency\n      }) : null), __jsx(\"a\", {\n        onClick: function onClick() {\n          _this3.setState({\n            showSelectBoxLang: false,\n            showAccountBox: false,\n            showSelectBoxCurrency: _this3.state.showSelectBoxCurrency ? false : true\n          });\n        },\n        ref: this.wrapperRef,\n        className: \"header-top__item-drop-container d-flex align-align-items-center\"\n      }, __jsx(\"span\", {\n        className: \"header-top__item-text\"\n      }, this.activeCurrency.toUpperCase()), __jsx(\"img\", {\n        src: arrowdownLight,\n        className: \"nav__item-svg\",\n        alt: \"arrowdownLight\"\n      }), this.state.showSelectBoxCurrency ? __jsx(SelectBox, {\n        lang: this.lang,\n        currency: this.activeCurrency,\n        type: \"currency\"\n      }) : null)), __jsx(\"div\", {\n        className: \"header-top__item header-top__item--icon-margin\"\n      }, __jsx(\"div\", {\n        className: \"header-top__item-container\"\n      }, __jsx(\"a\", {\n        onClick: function onClick() {\n          _this3.setState({\n            showSelectBoxLang: false,\n            showSelectBoxCurrency: false,\n            showAccountBox: !_this3.state.showAccountBox\n          });\n        },\n        className: \"header-top__item-link\"\n      }, __jsx(\"div\", null, __jsx(\"span\", {\n        className: \"header-top__item-text-up\"\n      }, this.props.isLogin ? (_this$data = this.data) === null || _this$data === void 0 ? void 0 : _this$data.customerFullName : __jsx(Translate, {\n        id: \"singin\"\n      })), __jsx(\"span\", {\n        style: {\n          cursor: \"pointer\"\n        },\n        className: \"header-top__item-text mr-3\"\n      }, this.props.isLogin ? __jsx(Translate, {\n        id: \"my-account\"\n      }) : __jsx(Translate, {\n        id: \"account\"\n      }), __jsx(\"img\", {\n        src: arrowdownLight,\n        className: \"nav__item-svg\",\n        alt: \"arrowdownLight\"\n      }))), __jsx(\"img\", {\n        src: UserCheckIcon,\n        className: \"header-top__item-icon header-top__item-icon--user\",\n        alt: \"UserCheckIcon\"\n      }), this.state.showAccountBox ? __jsx(SelectBox, {\n        lang: this.lang,\n        currency: this.activeCurrency,\n        className: \"dropAccount\",\n        type: \"account\"\n      }) : null))), __jsx(\"div\", {\n        className: \"header-top__item header-top__item--icon-margin\"\n      }, __jsx(\"div\", {\n        className: \"header-top__item-container\"\n      }, __jsx(\"a\", {\n        href: \"/\".concat(this.props.curr, \"-\").concat(this.props.lang, \"/cart\"),\n        className: \"header-top__item-link header-top__item-link--relative\"\n      }, __jsx(\"span\", {\n        className: \"header-top__item-text mr-3\"\n      }, __jsx(Translate, {\n        id: \"wishlist\"\n      })), this.props.wishCount > 0 && __jsx(\"span\", {\n        className: \"header-top__badge\"\n      }, this.props.wishCount), __jsx(\"img\", {\n        src: HeartOutlineIcon,\n        className: \"header-top__item-icon header-top__item-icon--heart\",\n        alt: \"HeartOutlineIcon\"\n      })))), __jsx(\"div\", {\n        className: \"header-top__item\"\n      }, __jsx(\"div\", {\n        className: \"header-top__item-container header-top__item--icon-margin\"\n      }, __jsx(\"a\", {\n        href: \"/\".concat(this.props.curr, \"-\").concat(this.props.lang, \"/cart\"),\n        className: \"header-top__item-link\"\n      }, __jsx(\"span\", {\n        className: \"header-top__item-text mr-3\"\n      }, __jsx(Translate, {\n        id: \"cart\"\n      })), this.props.cartCount > 0 && __jsx(\"span\", {\n        className: \"header-top__badge\"\n      }, this.props.cartCount), __jsx(\"img\", {\n        src: BuyButtonIcon,\n        className: \"header-top__item-icon header-top__item-icon--buy\",\n        alt: \"BuyButtonIcon\"\n      }))))))), __jsx(Translate, null, function (_ref3) {\n        var translate = _ref3.translate;\n        return __jsx(\"div\", null, _this3.props.isDesktop ? __jsx(Nav, {\n          params: _this3.lang,\n          content: translate,\n          data: data\n        }) : __jsx(\"div\", {\n          className: \"header__mobileMenu\"\n        }, data.logoUrlShopHeader && __jsx(Link, {\n          href: \"/[lang-curr]\",\n          as: \"/\".concat(_this3.props.curr, \"-\").concat(_this3.props.lang)\n        }, __jsx(\"a\", {\n          className: \"header-top__item-link mr-4 ml-4\"\n        }, __jsx(\"img\", {\n          src: logo,\n          alt: \"mobile logo\",\n          className: \"header__mobileMenu--logo\"\n        }))), __jsx(\"div\", {\n          className: \"header__mobileMenu--search\"\n        }, __jsx(Link, {\n          href: \"/\".concat(_this3.props.curr, \"-\").concat(_this3.props.lang, \"/search?search=\").concat(_this3.state.search)\n        }, __jsx(\"a\", null, __jsx(SearchIcon, {\n          className: \"mobile-search-input-icon\"\n        }))), __jsx(\"input\", {\n          ref: _this3.inputRef,\n          onChange: _this3.handleSearchChange.bind(_this3),\n          type: \"text\",\n          value: _this3.state.search,\n          onKeyPress: _this3.handRedirectSearch,\n          placeholder: translate(\"searchPlaceholder\")\n        })), _this3.state.searchData.length != 0 && __jsx(\"div\", {\n          className: \"searchResultMobile\"\n        }, __jsx(SearchSugestion, {\n          showLoader: _this3.state.searchResultLoading,\n          data: _this3.state.searchData\n        }))));\n      }));\n    }\n  }]);\n\n  return AppHeader;\n}(React.Component);\n\nvar mapDispatchToProps = {\n  addCartCount: addCartCount,\n  addWishCount: addWishCount\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: selectLogin(state).isLogin,\n    lang: selectLang(state),\n    curr: selectCurr(state),\n    cartCount: selectCartCount(state),\n    wishCount: selectWishCount(state)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(AppHeader));","map":null,"metadata":{},"sourceType":"module"}