{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\"; // import \"./GoodDetailAside.scss\";\n// import \"./GoodDetailAside-rtl.scss\";\n\nimport { ReactComponent as ArrowIcon } from \"./../../../../../../assets/icons/linear-arrow-sky.svg\";\nimport { ReactComponent as StoreIcon } from \"./../../../../../../assets/icons/store.svg\";\nimport { ReactComponent as ComponentIcon } from \"./../../../../../../assets/icons/Component88.svg\";\nimport { ReactComponent as ReturnsIcon } from \"./../../../../../../assets/icons/Returns.svg\";\nimport { ReactComponent as CancelReturn } from \"./../../../../../../assets/icons/cancel.svg\";\nimport { Translate } from \"react-localize-redux\";\nimport { SelectBox3 as SelectBox, Loading, StarRating } from \"../../../../../common\";\nimport classnames from \"classnames\";\nimport DropDown from \"react-dropdown\";\nimport expressIcon from \"./../../../../../../assets/icons/express.png\";\nimport expressArIcon from \"./../../../../../../assets/icons/express-ar.png\";\nimport { ReactComponent as CartIconWhite } from \"./../../../../../../assets/icons/addtocard-white.svg\";\nimport { ReactComponent as BuyNowIcon } from \"./../../../../../../assets/icons/buy-now.svg\";\nimport { ReactComponent as HeartCircleIcon } from \"./../../../../../../assets/icons/heart-circle.svg\";\nimport { ReactComponent as HeartCircleIconFill } from \"./../../../../../../assets/icons/heart-circle-fill.svg\";\nimport { ReactComponent as SecureIcon } from \"./../../../../../../assets/icons/secure.svg\";\nimport { ReactComponent as TrustIcon } from \"./../../../../../../assets/icons/trust.svg\";\nimport SlideDown from \"react-slidedown\";\nimport { GoodDetailContext } from \"../../GoodDetailContext\";\nimport { generateArrNumberRange, isAr } from \"./../../../../../../lib/helpers\";\nimport { connect } from \"react-redux\";\nimport { selectCurr, selectLang, PREVLINK_CHANGE, selectLogin } from \"../../../../../../appConfigSlice\";\nimport { withRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport StoreBtn from \"./../../../../../../assets/icons/store-btn.svg\";\nimport { client__getProviderInfo } from \"../../../../../../lib/api/client/clientGoodDetail\";\nimport HtmlRenderModal from \"../../../../../common/HtmlRenderModal/HtmlRenderModal\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport \"swiper/swiper-bundle.min.css\";\nconst NOT_POSSIBLE = 7;\n\nclass GoodDetailAside extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSlide\", () => {\n      this.setState(state => {\n        return {\n          slideDown: !state.slideDown\n        };\n      });\n    });\n\n    _defineProperty(this, \"goodCountHandler\", selected => {\n      // console.log(value)\n      // this.setState({\n      //   goodCount: selected.value,\n      // });\n      this.context.changeSelectedItemCount(selected.value);\n    });\n\n    _defineProperty(this, \"handleAddToCart\", async e => {\n      e.preventDefault();\n      if (this.state.addToCardLoading || !this.providerData.hasInventory || this.context.providerCityDeliveryType === NOT_POSSIBLE || this.state.buyNowLoading) return;\n      this.setState({\n        addToCardLoading: true\n      }); // let count = parseInt(this.context.selectedItemCount);\n      // if (!count) count = 1;\n\n      const result = this.props.addToCart();\n    });\n\n    _defineProperty(this, \"handleProviderChange\", selected => {\n      this.setState({\n        providerChangeLoading: true\n      });\n      const [goodId, providerId, slug] = this.props.router.query.good;\n      window.location.href = `/${this.props.curr}-${this.props.lang}/product/${goodId}/${selected[0].name}/${slug}`;\n    });\n\n    _defineProperty(this, \"handleClickBuyNow\", e => {\n      e.preventDefault();\n      if (this.state.addToCardLoading || !this.providerData.hasInventory || this.context.providerCityDeliveryType === NOT_POSSIBLE) return;\n      if (this.state.buyNowLoading) return;\n      this.setState({\n        buyNowLoading: true\n      });\n      this.props.handleBuyNow();\n    });\n\n    _defineProperty(this, \"handleProviderInfo\", async e => {\n      e.preventDefault();\n      if (this.state.providerInfoLoading) return;\n      this.setState({\n        providerInfoLoading: true\n      });\n\n      if (!this.props.isLogin) {\n        this.props.saveLink(this.props.router.asPath);\n        this.props.router.push(`/${this.props.curr}-${this.props.lang}/Auth`);\n        return;\n      }\n\n      try {\n        const res = await client__getProviderInfo(this.props.goodId, this.props.providerId);\n\n        if (res.status == 200) {\n          this.setState({\n            providerInfo: res.result,\n            providerInfoLoading: false,\n            providerHaveContent: true\n          });\n        }\n      } catch (err) {\n        console.log(err);\n        this.setState({\n          providerInfoLoading: false\n        });\n      }\n    });\n\n    this.state = {\n      slideDown: true,\n      goodCount: 1,\n      addToCardLoading: false,\n      providerChangeLoading: false,\n      buyNowLoading: false,\n      providerInfoLoading: false,\n      providerHaveContent: this.props.shopDetailAccess ? true : false\n    }; // surveyCount;\n    // surveyScore;\n  }\n\n  render() {\n    var _this$props$data, _this$props$data2, _this$providerData, _this$providerData2, _this$providerData3, _this$providerData4, _this$providerData5, _this$providerData6, _this$providerData7, _this$props$data$good, _this$props$data$good2, _this$props$data$good3, _this$props$data$good4, _this$props$data3, _this$otherProvider, _this$otherProvider2, _this$otherProvider3, _this$providerData8, _this$props$data4, _this$providerData9;\n\n    this.providerData = (_this$props$data = this.props.data) === null || _this$props$data === void 0 ? void 0 : _this$props$data.goodsProviderVarity[this.context.SelectedProviderIndex];\n    this.otherProvider = (_this$props$data2 = this.props.data) === null || _this$props$data2 === void 0 ? void 0 : _this$props$data2.otherProvider;\n    return __jsx(\"aside\", {\n      className: \"goodDetailAside\"\n    }, __jsx(\"div\", {\n      className: \"goodDetailAside__top-box\"\n    }, __jsx(\"ul\", {\n      className: \"goodDetailAside__top-list\"\n    }, __jsx(\"li\", {\n      className: \"goodDetailAside__top-item\"\n    }, __jsx(StoreIcon, {\n      className: \"goodDetailAside__top-icon\"\n    }), __jsx(\"span\", {\n      className: \"gray-text\"\n    }, __jsx(Translate, {\n      id: \"aside.soldby\"\n    })), ((_this$providerData = this.providerData) === null || _this$providerData === void 0 ? void 0 : _this$providerData.microstore) ? __jsx(\"span\", {\n      className: \"sky-text-link\"\n    }, __jsx(Link, {\n      href: `/${this.props.curr}-${this.props.lang}/${(_this$providerData2 = this.providerData) === null || _this$providerData2 === void 0 ? void 0 : _this$providerData2.vendorUrl}`\n    }, __jsx(\"a\", null, (_this$providerData3 = this.providerData) === null || _this$providerData3 === void 0 ? void 0 : _this$providerData3.shopTitle))) : __jsx(\"span\", {\n      className: \"sky-text-link\"\n    }, (_this$providerData4 = this.providerData) === null || _this$providerData4 === void 0 ? void 0 : _this$providerData4.shopTitle)), ((_this$providerData5 = this.providerData) === null || _this$providerData5 === void 0 ? void 0 : _this$providerData5.haveGuarantee) && __jsx(\"li\", {\n      className: \"goodDetailAside__top-item\"\n    }, __jsx(ComponentIcon, {\n      className: \"goodDetailAside__top-icon\"\n    }), __jsx(\"span\", {\n      className: \"gray-darker-text\"\n    }, (_this$providerData6 = this.providerData) === null || _this$providerData6 === void 0 ? void 0 : _this$providerData6.guaranteeMonthDuration, \"\\xA0\", __jsx(Translate, {\n      id: \"aside.month-war\"\n    }))), ((_this$providerData7 = this.providerData) === null || _this$providerData7 === void 0 ? void 0 : _this$providerData7.returningAllowed) ? __jsx(\"li\", {\n      className: \"goodDetailAside__top-item\"\n    }, __jsx(ReturnsIcon, {\n      className: \"goodDetailAside__top-icon\"\n    }), __jsx(\"span\", {\n      className: \"gray-darker-text\"\n    }, __jsx(Translate, {\n      id: \"aside.free-return\"\n    }))) : __jsx(\"li\", {\n      className: \"goodDetailAside__top-item\"\n    }, __jsx(CancelReturn, {\n      className: \"goodDetailAside__top-icon\"\n    }), __jsx(\"span\", {\n      className: \"gray-darker-text\"\n    }, __jsx(Translate, {\n      id: \"aside.dont-return\"\n    }))))), ((_this$props$data$good = this.props.data.goodsProviderVarity[0]) === null || _this$props$data$good === void 0 ? void 0 : _this$props$data$good.shopSurveyCount) ? __jsx(\"div\", {\n      className: \"goodDetailAside__shopscore-cnt d-flex align-items-center mt-3\"\n    }, __jsx(\"span\", {\n      className: \"goodDetailAside__sellerscore-text\"\n    }, __jsx(Translate, {\n      id: \"aside.seller-reviews\"\n    })), __jsx(StarRating, {\n      name: \"Shop rate\",\n      editing: false,\n      starCount: 5,\n      value: (_this$props$data$good2 = this.props.data.goodsProviderVarity[0]) === null || _this$props$data$good2 === void 0 ? void 0 : _this$props$data$good2.shopSurvey,\n      nextText: `(${(_this$props$data$good3 = this.props.data.goodsProviderVarity[0]) === null || _this$props$data$good3 === void 0 ? void 0 : _this$props$data$good3.shopSurvey})`\n    }), __jsx(\"span\", {\n      className: \"bold mt-1\"\n    }, (_this$props$data$good4 = this.props.data.goodsProviderVarity[0]) === null || _this$props$data$good4 === void 0 ? void 0 : _this$props$data$good4.shopSurveyCount)) : undefined, __jsx(\"div\", {\n      className: \"how-cal\"\n    }, __jsx(HtmlRenderModal, {\n      description: (_this$props$data3 = this.props.data) === null || _this$props$data3 === void 0 ? void 0 : _this$props$data3.descriptionCalculateShopRate\n    })), __jsx(\"div\", {\n      className: \"goodDetailAside__btm-box\"\n    }, ((_this$otherProvider = this.otherProvider) === null || _this$otherProvider === void 0 ? void 0 : _this$otherProvider.length) > 0 && __jsx(SlideDown, {\n      className: \"goodDetailAside__slide-down\"\n    }, this.state.slideDown && (this.state.providerChangeLoading ? __jsx(Loading, {\n      type: \"gray\",\n      width: \"40px\",\n      height: \"40px\",\n      styleSheet: {\n        margin: \"30px auto\"\n      }\n    }) : __jsx(SelectBox, {\n      onChange: this.handleProviderChange\n    }, this.otherProvider.map((provider, index) => {\n      return __jsx(SelectBox.SelectItem, {\n        key: index,\n        name: provider.providerId,\n        value: provider.shopTitle\n      }, __jsx(\"ul\", {\n        className: \"goodDetailAside__select-list\"\n      }, __jsx(\"li\", {\n        className: \"goodDetailAside__select-row\"\n      }, __jsx(\"span\", {\n        className: \"gray-text\"\n      }, __jsx(Translate, {\n        id: \"aside.soldby\"\n      })), __jsx(\"span\", {\n        className: \"sky-text-link\"\n      }, provider.shopTitle)), provider.haveGuarantee && __jsx(\"li\", {\n        className: \"goodDetailAside__select-row\"\n      }, __jsx(\"span\", {\n        className: \"gray-darker-text\"\n      }, provider.guaranteeMonthDuration, \"\\xA0\", __jsx(Translate, {\n        id: \"aside.month-war\"\n      }))), !provider.shippingPossibilities && __jsx(\"li\", {\n        className: \"goodDetailAside__select-row\"\n      }, __jsx(\"img\", {\n        className: \"goodDetailAside__selectIcon\",\n        src: isAr(this.props.lang) ? expressArIcon : expressIcon,\n        alt: \"express\"\n      })), __jsx(\"li\", {\n        className: \"goodDetailAside__select-row\"\n      }, __jsx(\"span\", {\n        className: \"gray-darker-text-small\"\n      }, __jsx(Translate, {\n        id: this.props.curr\n      }), \"\\xA0\", provider.finalPrice))));\n    })))), ((_this$otherProvider2 = this.otherProvider) === null || _this$otherProvider2 === void 0 ? void 0 : _this$otherProvider2.length) > 0 && __jsx(\"div\", {\n      className: \"goodDetailAside__offer-text-cnt\"\n    }, (_this$otherProvider3 = this.otherProvider) === null || _this$otherProvider3 === void 0 ? void 0 : _this$otherProvider3.length, \" \", __jsx(Translate, {\n      id: \"aside.other-offer\"\n    }), __jsx(\"span\", {\n      onClick: this.handleSlide,\n      className: \"sky-text-link goodDetailAside__offer-text\"\n    }, this.state.slideDown ? __jsx(Translate, {\n      id: \"aside.less\"\n    }) : __jsx(Translate, {\n      id: \"aside.view-offer\"\n    }), __jsx(ArrowIcon, {\n      className: classnames(\"goodDetailAside__offer-arrow\", {\n        \"goodDetailAside__offer-arrow--close\": !this.state.slideDown,\n        \"goodDetailAside__offer-arrow--open\": this.state.slideDown\n      })\n    }))), !this.context.saleWithCall ? __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"goodDetailAside__btn-cnt flex-nowrap flex-md-wrap\"\n    }, ((_this$providerData8 = this.providerData) === null || _this$providerData8 === void 0 ? void 0 : _this$providerData8.hasInventory) && (((_this$props$data4 = this.props.data) === null || _this$props$data4 === void 0 ? void 0 : _this$props$data4.isDownloadable) != true ? __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"cart-item__quantity\"\n    }, __jsx(\"span\", {\n      className: \"cart-item__qut-text\"\n    }, __jsx(Translate, {\n      id: \"aside.quantity\"\n    })), __jsx(DropDown, {\n      value: this.context.selectedItemCount.toString(),\n      className: \"gray__dropDown cart-item__dropdown\",\n      options: generateArrNumberRange(1, this.providerData.inventoryCount),\n      onChange: this.goodCountHandler\n    })), __jsx(\"div\", {\n      className: \"cart-item__quantity-mobile\"\n    }, __jsx(\"div\", {\n      className: \"d-flex flex-column align-items-center\",\n      onClick: () => {\n        document.getElementById(\"quantityMobile\").classList.toggle(\"quantity-mobile-slide-active\");\n      }\n    }, __jsx(\"span\", {\n      className: \"Qty-mobile\"\n    }, \"Qty\"), __jsx(\"span\", {\n      className: \"count-mobile\"\n    }, this.context.selectedItemCount)), __jsx(\"div\", {\n      className: \"quantity-mobile-slide\",\n      id: \"quantityMobile\"\n    }, __jsx(\"div\", {\n      className: \"quantity-mobile-select\"\n    }, __jsx(\"header\", null, __jsx(\"span\", null, __jsx(Translate, {\n      id: \"aside.quantity\"\n    })), __jsx(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        document.getElementById(\"quantityMobile\").classList.remove(\"quantity-mobile-slide-active\");\n      }\n    }, __jsx(\"svg\", {\n      width: \"23\",\n      height: \"23\",\n      viewBox: \"0 0 23 23\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      class: \"cross\"\n    }, __jsx(\"path\", {\n      d: \"M0.324008 1.909C-0.104992 1.48 -0.104992 0.766002 0.324008 0.322002C0.768008 -0.106998 1.46701 -0.106998 1.91101 0.322002L11.434 9.861L20.973 0.322002C21.402 -0.106998 22.116 -0.106998 22.544 0.322002C22.988 0.766002 22.988 1.481 22.544 1.909L13.021 11.433L22.544 20.972C22.988 21.401 22.988 22.115 22.544 22.559C22.115 22.988 21.401 22.988 20.973 22.559L11.434 13.02L1.91101 22.559C1.46701 22.988 0.768008 22.988 0.324008 22.559C-0.104992 22.115 -0.104992 21.4 0.324008 20.972L9.84701 11.433L0.324008 1.909Z\",\n      fill: \"#1E201D\"\n    })))), __jsx(\"div\", null, __jsx(Swiper, {\n      spaceBetween: 10,\n      slidesPerView: 6\n    }, [...Array(this.providerData.inventoryCount > 10 ? 10 : this.providerData.inventoryCount)].map((x, i) => __jsx(SwiperSlide, {\n      onClick: () => {\n        let n = i + 1;\n        if (!n) n = \"\";\n\n        if (n <= 10) {\n          this.context.changeSelectedItemCount(n);\n          document.getElementById(\"quantityMobile\").classList.remove(\"quantity-mobile-slide-active\");\n        }\n      }\n    }, __jsx(\"div\", {\n      className: \"swiper-slide-content \" + (this.context.selectedItemCount == i + 1 ? \"swiper-slide-content-active\" : \"\")\n    }, i + 1))))))))) : null), __jsx(\"a\", {\n      className: classnames(\"primary-btn mt-0 mt-md-3\", \"goodDetailAside__btn\", {\n        disabled: !this.providerData.hasInventory || this.context.providerCityDeliveryType === NOT_POSSIBLE,\n        \"goodDetailAside__btn--margin\": !this.providerData.hasInventory || this.context.providerCityDeliveryType === NOT_POSSIBLE\n      }),\n      href: \"\",\n      onClick: this.handleAddToCart\n    }, !this.providerData.hasInventory ? __jsx(Translate, {\n      id: \"common.unavailable\"\n    }) : this.state.addToCardLoading ? __jsx(Loading, {\n      type: \"white\",\n      width: \"25px\",\n      height: \"25px\"\n    }) : __jsx(React.Fragment, null, __jsx(CartIconWhite, {\n      className: \"goodDetailAside__text-icon\"\n    }), __jsx(Translate, {\n      id: \"aside.add-cart\"\n    })))), ((_this$providerData9 = this.providerData) === null || _this$providerData9 === void 0 ? void 0 : _this$providerData9.hasInventory) && __jsx(\"a\", {\n      className: classnames(\"primary-btn mt-3 ml-0 mr-0\", \"goodDetailAside__btn goodDetailAside__btn--bordered\", {\n        disabled: // !this.providerData.hasInventory ||\n        this.context.providerCityDeliveryType === NOT_POSSIBLE\n      }),\n      href: \"\",\n      onClick: this.handleClickBuyNow\n    }, this.state.buyNowLoading ? __jsx(Loading, {\n      type: \"gray\",\n      width: \"25px\",\n      height: \"25px\"\n    }) : __jsx(React.Fragment, null, __jsx(BuyNowIcon, {\n      className: \"goodDetailAside__text-icon\"\n    }), __jsx(Translate, {\n      id: \"aside.buy-now\"\n    })))) : __jsx(\"div\", {\n      className: \"goodDetailAside__sellWithCall-cnt\",\n      className: classnames(\"goodDetailAside__sellWithCall-cnt\", {\n        \"itemDetail__sellWithCall-cnt--styled\": this.state.providerHaveContent\n      })\n    }, __jsx(\"p\", {\n      className: \"goodDetailAside__sellWithCall-text\"\n    }, __jsx(Translate, {\n      id: \"detail.provider-msg1\"\n    })), !this.state.providerHaveContent ? __jsx(React.Fragment, null, __jsx(\"a\", {\n      className: classnames(\"primary-btn\", \"goodDetailAside__sellWithCall-btn\"),\n      href: \"\",\n      onClick: this.handleProviderInfo\n    }, this.state.providerInfoLoading ? __jsx(Loading, {\n      type: \"white\",\n      width: \"20px\",\n      height: \"20px\"\n    }) : __jsx(React.Fragment, null, __jsx(StoreBtn, {\n      className: \"goodDetailAside__text-icon\"\n    }), __jsx(Translate, {\n      id: \"detail.provider-info\"\n    })))) : __jsx(\"div\", {\n      className: \"mt-2\"\n    }, __jsx(\"div\", {\n      className: classnames(\"goodDetailAside__sellWithCall-btn-active\")\n    }, __jsx(React.Fragment, null, __jsx(StoreBtn, {\n      className: \"goodDetailAside__text-icon\"\n    }), __jsx(Translate, {\n      id: \"detail.provider-info-click\"\n    }))))), __jsx(\"div\", {\n      className: \"goodDetailAside__wish-cnt\"\n    }, __jsx(\"a\", {\n      onClick: this.props.handleLikeClick,\n      href: \"\",\n      className: \"goodItem-s2__wishlist-cnt\"\n    }, this.context.itemLiked ? __jsx(React.Fragment, null, __jsx(HeartCircleIconFill, {\n      className: \"goodItem-s2__wishlist-icon\"\n    }), __jsx(\"span\", {\n      className: \"goodItem-s2__wishlist-text\"\n    }, __jsx(Translate, {\n      id: \"aside.remove-wish\"\n    }))) : __jsx(React.Fragment, null, __jsx(HeartCircleIcon, {\n      className: \"goodItem-s2__wishlist-icon\"\n    }), __jsx(\"span\", {\n      className: \"goodItem-s2__wishlist-text\"\n    }, __jsx(Translate, {\n      id: \"aside.add-wish\"\n    }))))), __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data\"\n    }, __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item\"\n    }, __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item__left\"\n    }, __jsx(SecureIcon, {\n      className: \"goodDetailAside__bottom-data__item__icon\"\n    })), __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item__right\"\n    }, __jsx(\"p\", {\n      className: \"goodDetailAside__bottom-data__item__title\"\n    }, __jsx(Translate, {\n      id: \"aside.bottomData.secure-shopping\"\n    })), __jsx(\"p\", {\n      className: \"goodDetailAside__bottom-data__item__desc\"\n    }, __jsx(Translate, {\n      id: \"aside.bottomData.your-data-protected\"\n    })))), __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item\"\n    }, __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item__left\"\n    }, __jsx(TrustIcon, {\n      className: \"goodDetailAside__bottom-data__item__icon\"\n    })), __jsx(\"div\", {\n      className: \"goodDetailAside__bottom-data__item__right\"\n    }, __jsx(\"p\", {\n      className: \"goodDetailAside__bottom-data__item__title\"\n    }, __jsx(Translate, {\n      id: \"aside.bottomData.trusted-shipping\"\n    })), __jsx(\"p\", {\n      className: \"goodDetailAside__bottom-data__item__desc\"\n    }, __jsx(Translate, {\n      id: \"aside.bottomData.free-shipping-desc\"\n    })))))));\n  }\n\n}\n\n_defineProperty(GoodDetailAside, \"contextType\", GoodDetailContext);\n\nconst mapDispatchToProps = {\n  saveLink: link => {\n    return {\n      type: PREVLINK_CHANGE,\n      payload: {\n        link\n      }\n    };\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    lang: selectLang(state),\n    curr: selectCurr(state),\n    isLogin: selectLogin(state).isLogin\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(GoodDetailAside));","map":null,"metadata":{},"sourceType":"module"}